
var $backPort;var $frontPort;chrome.commands.onCommand.addListener(function(a){if(a==="kreed-speed-UP"){$frontPort.postMessage({type:"spdUp"})}else{if(a==="kreed-speed-Down"){$frontPort.postMessage({type:"spdDwn"})}else{if(a==="kreed-read-this-page"){openPopup()}}}});var kreedPopup=-1;chrome.runtime.onMessage.addListener(function(a){if(a.type==="open_kreeder"){openPopup()}});chrome.runtime.onConnectExternal.addListener(function(a){a.onMessage.addListener(fromBack);$backPort=a});chrome.extension.onConnect.addListener(function(a){a.onMessage.addListener(fromFront);$frontPort=a});function openPopup(){chrome.windows.getAll({},function(b){for(var a in b){if(a.id===kreedPopup){chrome.windows.update(kreedPopup,{focused:true});return}}chrome.tabs.create({url:chrome.extension.getURL("menus/kreedPopup.html"),active:false},function(c){chrome.windows.create({tabId:c.id,type:"popup",focused:true,width:700,height:500},function(d){kreedPopup=d.id})})})}function fromBack(a){$frontPort.postMessage(a)}function fromFront(a){$backPort.postMessage(a)};